<!DOCTYPE html>
<html lang="en">
<head>
<script type="module">
document.open()
document.write("<pre>")
import * as e from "./build/release.js"
Object.assign(window, e)
const input = "10\n20\n30\n40\n50\n60\n70\n80\n90\n100\n110\n120\n130\n140\n"
const source = `>>>>>+[-->-[>>+>-----<<]<--<---]>-.>>>+.>>..+++[.>]<<<<.+++.------.<<-.>>>>+.`

console.time("compile")
const runner = e.createRunner(source, 3000)
console.timeEnd("compile")
console.log("runner", runner)
console.log("program", getProgram(runner))

const inputA = new TextEncoder().encode(input)
console.log("input", inputA)
e.input(runner, inputA)
e.setInputClosed(runner)

let msg
console.time("run")
while ((msg = e.stepsTime(runner, 10000)) === 0) {}
console.timeEnd("run")
console.log("message", msg)

console.log("ip", getIp(runner))
console.log("memory", getMemory(runner))
console.log("mp", getMp(runner))

let o = e.flushOutput(runner)
console.log("output", o)
if (o) document.write(new TextDecoder().decode(o))
</script>
</head>
<body></body>
</html>
